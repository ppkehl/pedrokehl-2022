<script>
  import { onMount } from 'svelte';

  let dark;
  onMount(async () => {
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark')
      dark = true;
    } else {
      document.documentElement.classList.remove('dark')
      dark = false;
    }
	});
  
  function toggleTheme() {
    if (localStorage.getItem("theme")) {
      if (localStorage.getItem("theme") === "light") {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
        dark = true;
      } else {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
        dark = false;
      }
    } else {
      if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
        dark = false;
      } else {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
        dark = true;
      }
    }
  }
</script>

<div
  on:click={toggleTheme}
  id="theme-toggle"
  class="z-50 cursor-pointer relative flex items-center p-[2px] border-2 rounded-3xl border-solid border-gray-900 dark:border-white w-[50px] h-[25px]
   bg-gray-900 dark:bg-white transition-all 
   before:content-[''] before:w-[21px] before:h-[21px] before:block before:absolute before:left-0 before:rounded-full before:z-0 before:transition-all before:bg-white before:dark:bg-black before:dark:left-[25px]"
>
  <div class="bg-contain bg-center bg-no-repeat w-3.5 h-3.5 relative z-10 invert dark:invert-1 left-px" aria-label="Light Theme">
    <svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.31019 0.974503C9.31019 0.560289 8.97441 0.224503 8.56019 0.224503C8.14598 0.224503 7.81019 0.560289 7.81019 0.974503V2.03004C7.81019 2.44426 8.14598 2.78004 8.56019 2.78004C8.97441 2.78004 9.31019 2.44426 9.31019 2.03004V0.974503ZM3.54894 2.02748C3.25605 1.73459 2.78117 1.73459 2.48828 2.02748C2.19539 2.32037 2.19539 2.79525 2.48828 3.08814L3.01605 3.61591C3.30894 3.9088 3.78382 3.9088 4.07671 3.61591C4.3696 3.32302 4.3696 2.84814 4.07671 2.55525L3.54894 2.02748ZM14.6321 3.08814C14.925 2.79525 14.925 2.32037 14.6321 2.02748C14.3392 1.73459 13.8643 1.73459 13.5714 2.02748L13.0437 2.55525C12.7508 2.84814 12.7508 3.32302 13.0437 3.61591C13.3366 3.9088 13.8114 3.9088 14.1043 3.61591L14.6321 3.08814ZM1.4353 7.34939C1.02109 7.34939 0.685303 7.68518 0.685303 8.09939C0.685303 8.51361 1.02109 8.84939 1.4353 8.84939H2.49084C2.90506 8.84939 3.24084 8.51361 3.24084 8.09939C3.24084 7.68518 2.90506 7.34939 2.49084 7.34939H1.4353ZM14.6295 7.34939C14.2153 7.34939 13.8795 7.68518 13.8795 8.09939C13.8795 8.51361 14.2153 8.84939 14.6295 8.84939H15.6851C16.0993 8.84939 16.4351 8.51361 16.4351 8.09939C16.4351 7.68518 16.0993 7.34939 15.6851 7.34939H14.6295ZM4.07671 13.6435C4.3696 13.3506 4.3696 12.8758 4.07671 12.5829C3.78382 12.29 3.30894 12.29 3.01605 12.5829L2.48828 13.1106C2.19539 13.4035 2.19539 13.8784 2.48828 14.1713C2.78117 14.4642 3.25605 14.4642 3.54894 14.1713L4.07671 13.6435ZM14.1043 12.5829C13.8114 12.29 13.3366 12.29 13.0437 12.5829C12.7508 12.8758 12.7508 13.3506 13.0437 13.6435L13.5714 14.1713C13.8643 14.4642 14.3392 14.4642 14.6321 14.1713C14.925 13.8784 14.925 13.4035 14.6321 13.1106L14.1043 12.5829ZM9.31019 14.1687C9.31019 13.7545 8.97441 13.4187 8.56019 13.4187C8.14598 13.4187 7.81019 13.7545 7.81019 14.1687V15.2243C7.81019 15.6385 8.14598 15.9743 8.56019 15.9743C8.97441 15.9743 9.31019 15.6385 9.31019 15.2243V14.1687ZM5.87927 8.09941C5.87927 6.61901 7.07937 5.41891 8.55977 5.41891C10.0402 5.41891 11.2403 6.61901 11.2403 8.09941C11.2403 9.57981 10.0402 10.7799 8.55977 10.7799C7.07937 10.7799 5.87927 9.57981 5.87927 8.09941ZM8.55977 3.91891C6.25094 3.91891 4.37927 5.79059 4.37927 8.09941C4.37927 10.4082 6.25094 12.2799 8.55977 12.2799C10.8686 12.2799 12.7403 10.4082 12.7403 8.09941C12.7403 5.79059 10.8686 3.91891 8.55977 3.91891Z" fill="white"/>
    </svg>
  </div>
  <div class="bg-contain bg-center bg-no-repeat w-3.5 h-3.5 relative z-10 invert-0 left-[13px]" aria-label="Dark Theme">
    <svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
      <path d="M14.112 8.9854C13.602 9.12084 13.0766 9.1894 12.5489 9.18934C10.9422 9.18934 9.43335 8.56472 8.30001 7.43138C7.55577 6.68285 7.02072 5.75234 6.74818 4.73258C6.47565 3.71282 6.47515 2.63944 6.74674 1.61943C6.78066 1.4919 6.78044 1.35769 6.74612 1.23026C6.71179 1.10284 6.64456 0.986682 6.55117 0.893445C6.45778 0.800207 6.34151 0.733166 6.21403 0.699048C6.08655 0.66493 5.95234 0.664933 5.82487 0.699059C4.54791 1.03935 3.38288 1.70945 2.44667 2.64215C-0.486779 5.57559 -0.486779 10.3505 2.44667 13.2855C3.14392 13.9866 3.97332 14.5425 4.88684 14.921C5.80037 15.2995 6.77988 15.493 7.76871 15.4904C8.75727 15.4932 9.73655 15.2998 10.6498 14.9215C11.5631 14.5431 12.3923 13.9873 13.0892 13.2862C14.0226 12.3498 14.693 11.1842 15.0331 9.90652C15.0669 9.77904 15.0666 9.64493 15.0323 9.51759C14.998 9.39026 14.9308 9.27416 14.8376 9.18091C14.7443 9.08766 14.6282 9.02052 14.5009 8.98621C14.3735 8.9519 14.2394 8.95162 14.112 8.9854ZM12.0259 12.2221C11.4682 12.7828 10.8049 13.2274 10.0743 13.5301C9.34366 13.8327 8.56028 13.9875 7.76946 13.9853C6.97837 13.9873 6.19474 13.8324 5.46389 13.5297C4.73303 13.2269 4.06945 12.7822 3.51152 12.2214C1.16507 9.87416 1.16507 6.05421 3.51152 3.70701C3.96494 3.2541 4.48841 2.87725 5.06178 2.59097C4.97785 3.67394 5.12872 4.76226 5.50407 5.78155C5.87943 6.80085 6.47042 7.7271 7.23665 8.49699C8.00486 9.26563 8.93083 9.85826 9.95055 10.2339C10.9703 10.6095 12.0594 10.7592 13.1427 10.6726C12.8548 11.245 12.4779 11.768 12.0259 12.2221Z" fill="white"/>
    </svg>
  </div>
</div>